<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | Sahabi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Extra styles for checkout layout if not in style.css yet -->
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar">
        <a href="index.html" class="logo">Sahabi</a>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="shop-perfumes.html">Perfumes</a></li>
            <li><a href="#oils">Oils</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        <a href="shop-perfumes.html" class="btn-nav">
            <span>Back to Shop</span>
        </a>
    </nav>

    <!-- Page Header -->
    <header class="page-header" style="padding-bottom: 3rem;">
        <h1 class="fade-in">Secure <span class="gold-text">Checkout</span></h1>
    </header>

    <div class="checkout-container fade-in delay-1">

        <!-- Left: Form -->
        <div class="checkout-form-section">
            <h2 class="section-title">Shipping Details</h2>
            <form id="checkout-form" onsubmit="handleCheckout(event)">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" required placeholder="John Doe">
                </div>
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" required placeholder="john@example.com">
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" required placeholder="+1 234 567 8900">
                </div>
                <div class="form-group">
                    <label>Shipping Address</label>
                    <textarea rows="3" required placeholder="Street, City, Country"></textarea>
                </div>

                <h2 class="section-title" style="margin-top: 2rem;">Payment Method</h2>
                <div class="payment-methods">
                    <label class="payment-option">
                        <input type="radio" name="payment" checked>
                        <span class="radio-custom"></span>
                        Credit Card (Stripe - Demo)
                    </label>
                    <label class="payment-option">
                        <input type="radio" name="payment">
                        <span class="radio-custom"></span>
                        Cash on Delivery
                    </label>
                </div>

                <button type="submit" class="btn-place-order">Place Order</button>
            </form>
        </div>

        <!-- Right: Order Summary -->
        <div class="order-summary-section">
            <h2 class="section-title">Order Summary</h2>
            <div class="summary-items" id="summary-items">
                <!-- Items injected here -->
            </div>

            <div class="summary-totals">
                <div class="summary-row">
                    <span>Subtotal</span>
                    <span id="subtotal-price">$0.00</span>
                </div>
                <div class="summary-row">
                    <span>Shipping</span>
                    <span>Free</span>
                </div>
                <div class="summary-row total">
                    <span>Total</span>
                    <span id="total-price">$0.00</span>
                </div>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-logo">Sahabi</div>
            <p>&copy; 2026 Sahabi Perfumes. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Load Cart
        const cart = JSON.parse(localStorage.getItem('sahabi_cart')) || [];

        function initCheckout() {
            const container = document.getElementById('summary-items');
            const subtotalEl = document.getElementById('subtotal-price');
            const totalEl = document.getElementById('total-price');

            if (cart.length === 0) {
                container.innerHTML = '<p>Your cart is empty. <a href="shop-perfumes.html" style="color:var(--accent-gold)">Go Shop</a></p>';
                document.querySelector('.btn-place-order').disabled = true;
                document.querySelector('.btn-place-order').style.opacity = 0.5;
                document.querySelector('.btn-place-order').style.cursor = 'not-allowed';
                return;
            }

            let total = 0;

            container.innerHTML = cart.map(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                return `
                    <div class="summary-item">
                        <div class="summary-img">
                            <img src="${item.image}" alt="${item.name}">
                            <span class="summary-qty">${item.quantity}</span>
                        </div>
                        <div class="summary-info">
                            <h4>${item.name}</h4>
                            <p>${item.size}</p>
                        </div>
                        <div class="summary-price">$${itemTotal.toFixed(2)}</div>
                    </div>
                `;
            }).join('');

            subtotalEl.textContent = `$${total.toFixed(2)}`;
            totalEl.textContent = `$${total.toFixed(2)}`;
        }

        function handleCheckout(e) {
            e.preventDefault();

            if (cart.length === 0) return;

            // Simulate API call
            const btn = document.querySelector('.btn-place-order');
            const originalText = btn.textContent;
            btn.textContent = 'Processing...';
            btn.disabled = true;

            setTimeout(() => {
                // Success
                localStorage.removeItem('sahabi_cart');
                alert('Order placed successfully! Thank you for choosing Sahabi.');
                window.location.href = 'index.html';
            }, 1500);
        }

        document.addEventListener('DOMContentLoaded', () => {
            initCheckout();

            // Animations
            setTimeout(() => {
                document.querySelectorAll('.fade-in').forEach(el => el.classList.add('visible'));
            }, 100);
        });
    </script>
</body>

</html>